<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>GSAP 1755 Interaction Test</title>

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #0B0D17;
      font-family: sans-serif;
      color: white;
      overflow-x: hidden;
    }

    /* 테스트 섹션 */
    .test-works {
      position: relative;
      height: 100vh;
      overflow: hidden;
    }

    /* 프로젝트 공통 */
    .test-project {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 64px;
      font-weight: 300;
      letter-spacing: 2px;
      opacity: 0;
      white-space: nowrap;
    }

    /* 구분용 색상 */
    .p1 { color: #91EAE4; }
    .p2 { color: #86A8E7; }
    .p3 { color: #7F7FD5; }
    .p4 { color: #B993D6; }

    /* 안내 텍스트 */
    .hint {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 14px;
      opacity: 0.6;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>

  <section class="test-works">
    <div class="test-project p1">PROJECT 01</div>
    <div class="test-project p2">PROJECT 02</div>
    <div class="test-project p3">PROJECT 03</div>
    <div class="test-project p4">PROJECT 04</div>
  </section>

  <div class="hint">Scroll ↓ (wsss 1755 style)</div>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    const projects = gsap.utils.toArray('.test-project');

    // 초기 상태
    projects.forEach((el, i) => {
      gsap.set(el, {
        opacity: i === 0 ? 1 : 0,
        y: i === 0 ? 0 : 120
      });
    });

    ScrollTrigger.create({
      trigger: '.test-works',
      start: 'top top',
      end: '+=400%',     // 프로젝트 4개 → 4칸
      pin: true,
      scrub: 1,

      onUpdate(self) {
        const index = Math.min(
          projects.length - 1,
          Math.floor(self.progress * projects.length)
        );

        projects.forEach((el, i) => {
          if (i === index) {
            gsap.to(el, {
              opacity: 1,
              y: 0,
              duration: 0.6,
              ease: 'power3.out'
            });
          } else if (i < index) {
            gsap.to(el, {
              opacity: 0,
              y: -120,
              duration: 0.6,
              ease: 'power3.inOut'
            });
          } else {
            gsap.to(el, {
              opacity: 0,
              y: 120,
              duration: 0.6,
              ease: 'power3.inOut'
            });
          }
        });
      }
    });
  </script>

</body>
</html>
